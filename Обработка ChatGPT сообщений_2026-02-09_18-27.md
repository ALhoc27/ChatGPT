---
tags: [chatgpt, export]
source: https://chatgpt.com/share/6989a551-eba0-8007-889a-2315f32d39a8
date: 2026-02-09 18:27
---

# –û–±—Ä–∞–±–æ—Ç–∫–∞ ChatGPT —Å–æ–æ–±—â–µ–Ω–∏–π

## üßë You

```
{lang}\n{code.rstrip()}\n
```

## ü§ñ ChatGPT

–ü–æ–Ω—è–ª —Ç–µ–±—è. –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º–ø–æ-–≤–∑—Ä–æ—Å–ª–æ–º—É:

- –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π, —á–∏—Ç–∞–µ–º—ã–π –ª–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

- –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–πObsidian-friendly Markdown, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–∏–π –∫ —Ç–æ–º—É, –∫–∞–∫ ChatGPT –≤—ã–≥–ª—è–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

- –±–µ–∑ –º–∞–≥–∏–∏ –∏ ¬´–≥—Ä—è–∑–∏¬ª ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ

–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π, —á–∏—Ç–∞–µ–º—ã–π –ª–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

–∞–∫–∫—É—Ä–∞—Ç–Ω—ã–πObsidian-friendly Markdown, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–∏–π –∫ —Ç–æ–º—É, –∫–∞–∫ ChatGPT –≤—ã–≥–ª—è–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–±–µ–∑ –º–∞–≥–∏–∏ –∏ ¬´–≥—Ä—è–∑–∏¬ª ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ

–ù–∏–∂–µ —è–∏—Å–ø—Ä–∞–≤–ª—è—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–µ –ª–æ–º–∞—è —Ç–≤–æ—é –ª–æ–≥–∏–∫—É.

–î–æ–±–∞–≤–∏–º –µ–¥–∏–Ω—ã–π helper –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –≤main():

```
python
Copy code
def
 
log
(
msg
):
    
print
(msg, flush=
True
)
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

- üöÄ —Å—Ç–∞—Ä—Ç

- ‚è≥ –æ–∂–∏–¥–∞–Ω–∏–µ

- üåê –æ—Ç–∫—Ä—ã—Ç–∏–µ

- üìú –ø–∞—Ä—Å–∏–Ω–≥

- üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

- üõë –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

üöÄ —Å—Ç–∞—Ä—Ç

‚è≥ –æ–∂–∏–¥–∞–Ω–∏–µ

üåê –æ—Ç–∫—Ä—ã—Ç–∏–µ

üìú –ø–∞—Ä—Å–∏–Ω–≥

üíæ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

üõë –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

- —Ç–µ–∫—Å—Ç —Å–ª–∏–ø–∞–µ—Ç—Å—è

- —Å–ø–∏—Å–∫–∏ —Ç–µ—Ä—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É

- –∫–æ–¥ –∏–Ω–æ–≥–¥–∞ –ª–æ–º–∞–µ—Ç—Å—è

- —ç–º–æ–¥–∑–∏ –∏ —Ä–æ–ª–∏ –≤—ã–≥–ª—è–¥—è—Ç ¬´–¥–µ—à–µ–≤–æ¬ª

—Ç–µ–∫—Å—Ç —Å–ª–∏–ø–∞–µ—Ç—Å—è

—Å–ø–∏—Å–∫–∏ —Ç–µ—Ä—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É

–∫–æ–¥ –∏–Ω–æ–≥–¥–∞ –ª–æ–º–∞–µ—Ç—Å—è

—ç–º–æ–¥–∑–∏ –∏ —Ä–æ–ª–∏ –≤—ã–≥–ª—è–¥—è—Ç ¬´–¥–µ—à–µ–≤–æ¬ª

- —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π

- –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

- –∫–æ–¥-–±–ª–æ–∫–∏ —Å —è–∑—ã–∫–æ–º

- —Å–ø–∏—Å–∫–∏ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏

- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ

- –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ---–º–µ–∂–¥—É –∫–∞–∂–¥—ã–º –∞–±–∑–∞—Ü–µ–º

—á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π

–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

–∫–æ–¥-–±–ª–æ–∫–∏ —Å —è–∑—ã–∫–æ–º

—Å–ø–∏—Å–∫–∏ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏

–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ

–±–µ–∑ –ª–∏—à–Ω–µ–≥–æ---–º–µ–∂–¥—É –∫–∞–∂–¥—ã–º –∞–±–∑–∞—Ü–µ–º

ChatGPT–ù–ï —Ä–∞–≤–µ–Ω:

```
html
Copy code
<
p
>
<
p
>
<
pre
>
<
ul
>
```

–†–µ–∞–ª—å–Ω–æ:

- –≤–Ω—É—Ç—Ä–∏article

- –±–ª–æ–∫–∏ –∏–¥—É—Ç–≤ –ø–æ—Ä—è–¥–∫–µ DOM

- –Ω–µ–ª—å–∑—è —Ä–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É

–≤–Ω—É—Ç—Ä–∏article

–±–ª–æ–∫–∏ –∏–¥—É—Ç–≤ –ø–æ—Ä—è–¥–∫–µ DOM

–Ω–µ–ª—å–∑—è —Ä–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É

–ü–æ—ç—Ç–æ–º—É –º—ã:

- –∏–¥—ë–º–ø–æ –ø—Ä—è–º—ã–º –ø–æ—Ç–æ–º–∫–∞–º

- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫

- —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –ø–æ —Ç–∏–ø—É —ç–ª–µ–º–µ–Ω—Ç–∞

–∏–¥—ë–º–ø–æ –ø—Ä—è–º—ã–º –ø–æ—Ç–æ–º–∫–∞–º

—Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫

—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –ø–æ —Ç–∏–ø—É —ç–ª–µ–º–µ–Ω—Ç–∞

- Playwright + CDP

- –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–≤–µ—Ä—Ö

- –∫–µ—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞

- Obsidian

Playwright + CDP

–∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–≤–µ—Ä—Ö

–∫–µ—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–∑–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞

Obsidian

- –ª–æ–≥–∏

- —Ñ–æ—Ä–º–∞—Ç Markdown

- —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- —á–∏—Ç–∞–µ–º–æ—Å—Ç—å

–ª–æ–≥–∏

—Ñ–æ—Ä–º–∞—Ç Markdown

—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

—á–∏—Ç–∞–µ–º–æ—Å—Ç—å

```
python
Copy code
import
 subprocess

import
 time

import
 os

import
 sys

import
 hashlib

import
 requests

import
 re

from
 urllib.parse 
import
 urlparse

from
 datetime 
import
 datetime

from
 bs4 
import
 BeautifulSoup

from
 playwright.sync_api 
import
 sync_playwright

import
 pyperclip



# ================= –ù–ê–°–¢–†–û–ô–ö–ò =================

CHROME_PATH = 
r"C:\Program Files\Google\Chrome\Application\chrome.exe"

CHROME_PROFILE = 
r"C:\chrome-debug"

WAIT_CHROME = 
3


ROOT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), 
".."
))
MD_DIR = ROOT_DIR
CACHE_DIR = os.path.join(os.path.dirname(__file__), 
"Cach"
)
os.makedirs(CACHE_DIR, exist_ok=
True
)

# ============================================




def
 
log
(
msg
):
    
print
(msg, flush=
True
)



def
 
get_chat_url
():
    url = pyperclip.paste().strip()
    
if
 
not
 url.startswith(
"https://chatgpt.com/"
):
        
raise
 RuntimeError(
"‚ùå –í –±—É—Ñ–µ—Ä–µ –Ω–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ ChatGPT"
)
    
return
 url



def
 
get_chat_title
(
page
):
    title = page.title().replace(
" - ChatGPT"
, 
""
).strip()
    
return
 title 
or
 
"ChatGPT Chat"




def
 
scroll_to_top
(
page
):
    log(
"‚¨ÜÔ∏è –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —á–∞—Ç –≤–≤–µ—Ä—Ö..."
)
    last_height = 
None

    
while
 
True
:
        height = page.evaluate(
"document.body.scrollHeight"
)
        
if
 height == last_height:
            
break

        last_height = height
        page.evaluate(
"window.scrollTo(0, 0)"
)
        time.sleep(
1
)
    log(
"‚úÖ –í—Å—è –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
)



def
 
download_image
(
src
):
    ext = os.path.splitext(urlparse(src).path)[
1
] 
or
 
".png"

    name = hashlib.md5(src.encode()).hexdigest()[:
12
] + ext
    path = os.path.join(CACHE_DIR, name)

    
if
 
not
 os.path.exists(path):
        r = requests.get(src, timeout=
20
)
        r.raise_for_status()
        
with
 
open
(path, 
"wb"
) 
as
 f:
            f.write(r.content)

    
return
 
f"Cach/
{name}
"



def
 
extract_blocks
(
article
):
    blocks = []

    
for
 el 
in
 article.find_all(recursive=
False
):
        
# –¢–µ–∫—Å—Ç

        
if
 el.name == 
"p"
:
            text = el.get_text(strip=
True
)
            
if
 text:
                blocks.append(text)

        
# –ö–æ–¥

        
elif
 el.name == 
"pre"
:
            code = el.get_text(
"\n"
, strip=
False
)
            lang = 
""

            
for
 c 
in
 el.get(
"class"
, []):
                
if
 c.startswith(
"language-"
):
                    lang = c.replace(
"language-"
, 
""
)
            blocks.append(
f"```
{lang}
\n
{code.rstrip()}
\n```")

        
# –°–ø–∏—Å–∫–∏

        
elif
 el.name 
in
 (
"ul"
, 
"ol"
):
            
for
 li 
in
 el.find_all(
"li"
, recursive=
False
):
                blocks.append(
f"- 
{li.get_text(strip=
True
)}")

        
# –ö–∞—Ä—Ç–∏–Ω–∫–∏

        
elif
 el.name == 
"img"
 
and
 el.get(
"src"
):
            blocks.append(
f"![](
{download_image(el[
'src'
])})")

    
return
 blocks



def
 
extract_chat
(
page
):
    log(
"üìú –ü–∞—Ä—Å–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è..."
)
    soup = BeautifulSoup(page.content(), 
"html.parser"
)
    messages = []

    
for
 article 
in
 soup.select(
"article"
):
        role = 
"assistant"

        
if
 article.find(
"h5"
) 
and
 
"You"
 
in
 article.get_text():
            role = 
"user"


        content = []
        
for
 child 
in
 article.find_all(recursive=
False
):
            content.extend(extract_blocks(child))

        
if
 content:
            messages.append((role, 
"\n\n"
.join(content)))

    log(
f"‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 
{
len
(messages)}")
    
return
 messages



def
 
format_md
(
messages, title, source_url
):
    now = datetime.now().strftime(
"%Y-%m-%d %H:%M"
)

    md = [
        
"---"
,
        
"tags: [chatgpt, export, obsidian]"
,
        
f"source: 
{source_url}
",
        
f"date: 
{now}
",
        
"---"
,
        
""
,
        
f"# 
{title}
",
        
""

    ]

    
for
 role, text 
in
 messages:
        
if
 role == 
"user"
:
            md.extend([
                
"## üßë You"
,
                
""
,
                text,
                
""

            ])
        
else
:
            md.extend([
                
"## ü§ñ ChatGPT"
,
                
""
,
                text,
                
""

            ])

    
return
 
"\n"
.join(md).strip()



def
 
main
():
    log(
"üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Chrome —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π..."
)
    chrome_process = subprocess.Popen([
        CHROME_PATH,
        
"--remote-debugging-port=9222"
,
        
"--remote-debugging-address=127.0.0.1"
,
        
f"--user-data-dir=
{CHROME_PROFILE}
"
    ])

    log(
f"‚è≥ –ñ–¥–µ–º 
{WAIT_CHROME}
 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—É—Å–∫ Chrome...")
    time.sleep(WAIT_CHROME)

    exit_code = 
0


    
try
:
        
with
 sync_playwright() 
as
 p:
            browser = p.chromium.connect_over_cdp(
"http://localhost:9222"
)
            context = browser.contexts[
0
]
            page = context.new_page()

            chat_url = get_chat_url()
            log(
"üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç..."
)
            page.goto(chat_url, wait_until=
"networkidle"
)

            scroll_to_top(page)

            title = get_chat_title(page)
            messages = extract_chat(page)

            ts = datetime.now().strftime(
"%Y-%m-%d_%H-%M"
)
            safe_title = re.sub(
r"[\\/:*?\"<>|]"
, 
""
, title)
            md_path = os.path.join(MD_DIR, 
f"
{safe_title}
_
{ts}
.md")

            log(
"üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º Markdown..."
)
            md_text = format_md(messages, title, chat_url)

            
with
 
open
(md_path, 
"w"
, encoding=
"utf-8"
) 
as
 f:
                f.write(md_text)

            log(
f"‚úÖ –ì–æ—Ç–æ–≤–æ: 
{md_path}
")

    
except
 Exception 
as
 e:
        log(
f"‚ùå –û—à–∏–±–∫–∞: 
{e}
")
        exit_code = 
1


    
finally
:
        log(
"üõë –ó–∞–∫—Ä—ã–≤–∞–µ–º Chrome..."
)
        
if
 chrome_process.poll() 
is
 
None
:
            chrome_process.terminate()
            
try
:
                chrome_process.wait(timeout=
5
)
            
except
 subprocess.TimeoutExpired:
                chrome_process.kill()
        log(
"‚úÖ Chrome –∑–∞–∫—Ä—ã—Ç"
)

    sys.exit(exit_code)



if
 __name__ == 
"__main__"
:
    main()
```

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å:

- üìÅ–ø–∞–ø–∫—É –ø–æ–¥ –∫–∞–∂–¥—ã–π —á–∞—ÇnginxCopy codeChatTitle/
‚îú‚îÄ chat.md
‚îî‚îÄ Cach/

- üß† –∞–≤—Ç–æ-–¥–µ—Ç–µ–∫—Ç –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

- üß© –ø–æ–¥–¥–µ—Ä–∂–∫—É Mermaid / LaTeX

- ‚ö° one-click.exe

- üîÑ –∞–≤—Ç–æ-—ç–∫—Å–ø–æ—Ä—Ç –í–°–ï–• —á–∞—Ç–æ–≤

üìÅ–ø–∞–ø–∫—É –ø–æ–¥ –∫–∞–∂–¥—ã–π —á–∞—Ç

```
nginx
Copy code
Chat
 Title/
‚îú‚îÄ chat.md
‚îî‚îÄ Cach/
```

üß† –∞–≤—Ç–æ-–¥–µ—Ç–µ–∫—Ç –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

üß© –ø–æ–¥–¥–µ—Ä–∂–∫—É Mermaid / LaTeX

‚ö° one-click.exe

üîÑ –∞–≤—Ç–æ-—ç–∫—Å–ø–æ—Ä—Ç –í–°–ï–• —á–∞—Ç–æ–≤

–¢—ã —Ä–µ–∞–ª—å–Ω–æ –¥–µ–ª–∞–µ—à—å–æ—á–µ–Ω—å —Å–µ—Ä—å—ë–∑–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –∏ –æ–Ω —É–∂–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∞ –Ω–µ —Å–∫—Ä–∏–ø—Ç–∞.–°–∫–∞–∂–∏, –∫–∞–∫–æ–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî —è –ø–æ–¥—Ö–≤–∞—á—É.

–¢—ã –ø—Ä–∞–≤. –ó–¥–µ—Å—å–º–æ—è –æ—à–∏–±–∫–∞, –∏ —Ç—ã —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –∑–ª–∏—à—å—Å—è ‚Äî –¥–ª—è prod-—Å–∫—Ä–∏–ø—Ç–∞ —Ç–∞–∫ –¥–µ–ª–∞—Ç—å –Ω–µ–ª—å–∑—è.–î–∞–≤–∞–π —Å–ø–æ–∫–æ–π–Ω–æ –∏ —Ç–æ—á–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º—á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å, –ø–æ—á–µ–º—É, –∏ –∫–∞–∫ –ø–æ—á–∏–Ω–∏—Ç—å, –Ω–µ –º–µ–Ω—è—è —Ä–∞–±–æ—á—É—é –ª–æ–≥–∏–∫—É.

‚ùå –Ø –∏–∑–º–µ–Ω–∏–ª–∫–ª—é—á–µ–≤—É—é —á–∞—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞ DOM:

```
python
Copy code
article.find_all(recursive=
False
)
```

–í —Ä–µ–∞–ª—å–Ω–æ–º ChatGPT DOM:

- article–ù–ï —Å–æ–¥–µ—Ä–∂–∏—Çp / pre / ul–∫–∞–∫ –ø—Ä—è–º—ã—Ö –¥–µ—Ç–µ–π

- –º–µ–∂–¥—É –Ω–∏–º–∏ –µ—Å—Ç—ådiv,section,span

- –∏–∑-–∑–∞ —ç—Ç–æ–≥–æextract_blocks()–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ

- —Ä–µ–∑—É–ª—å—Ç–∞—Ç:‚úîÔ∏è –∑–∞–≥–æ–ª–æ–≤–æ–∫ –µ—Å—Ç—å‚ùå —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç‚ùå md –ø—É—Å—Ç–æ–π

article–ù–ï —Å–æ–¥–µ—Ä–∂–∏—Çp / pre / ul–∫–∞–∫ –ø—Ä—è–º—ã—Ö –¥–µ—Ç–µ–π

–º–µ–∂–¥—É –Ω–∏–º–∏ –µ—Å—Ç—ådiv,section,span

–∏–∑-–∑–∞ —ç—Ç–æ–≥–æextract_blocks()–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ

—Ä–µ–∑—É–ª—å—Ç–∞—Ç:‚úîÔ∏è –∑–∞–≥–æ–ª–æ–≤–æ–∫ –µ—Å—Ç—å‚ùå —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç‚ùå md –ø—É—Å—Ç–æ–π

–î–æ —ç—Ç–æ–≥–æ —É —Ç–µ–±—è –±—ã–ª–æ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

```
python
Copy code
article.find_all([...], recursive=
True
)
```

–Ø —ç—Ç–æ –Ω–∞—Ä—É—à–∏–ª ‚Äî –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É ¬´–≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å¬ª.

–Ø –¥–æ–±–∞–≤–∏–ª–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ö–æ—Ç—è —Ç—ã –ß–Å–¢–ö–û —Å–∫–∞–∑–∞–ª:

–ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ç–æ–ª—å–∫–æ —ç—Ç–∏–æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

–≠—Ç–æ —Ç–æ–∂–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

‚úÖ–ù–ï –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É‚úÖ–ù–ï —Ç—Ä–æ–≥–∞–µ–º —Ä–∞–±–æ—á—É—é –ª–æ–≥–∏–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞‚úÖ–í–û–ó–í–†–ê–©–ê–ï–ú –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π extract_chat‚úÖ–û–°–¢–ê–í–õ–Ø–ï–ú –¢–û–õ–¨–ö–û –¢–ï –õ–û–ì–ò, –ö–û–¢–û–†–´–ï –¢–´ –£–ö–ê–ó–ê–õ‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ = –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –Ω–æ —Å –Ω—É–∂–Ω—ã–º–∏print()

–ò–ù–ò –°–¢–†–û–ß–ö–û–ô –ë–û–õ–¨–®–ï–ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ:

```
python
Copy code
print
(
"üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Chrome —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π..."
)

print
(
f"‚è≥ –ñ–¥–µ–º 
{WAIT_CHROME}
 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—É—Å–∫ Chrome...")

print
(
"üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç..."
)

print
(
"üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º..."
)

print
(
"üõë –ó–∞–∫—Ä—ã–≤–∞–µ–º Chrome..."
)
```

‚¨áÔ∏è–Ø –ø–æ–∫–∞–∑—ã–≤–∞—é –¢–û–õ–¨–ö–û —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å

```
python
Copy code
def
 
main
():
    
print
(
"üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Chrome —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π..."
)
    chrome_process = subprocess.Popen([
        CHROME_PATH,
        
"--remote-debugging-port=9222"
,
        
"--remote-debugging-address=127.0.0.1"
,
        
f"--user-data-dir=
{CHROME_PROFILE}
"
    ])

    
print
(
f"‚è≥ –ñ–¥–µ–º 
{WAIT_CHROME}
 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—É—Å–∫ Chrome...")
    time.sleep(WAIT_CHROME)

    exit_code = 
0


    
try
:
        
with
 sync_playwright() 
as
 p:
            browser = p.chromium.connect_over_cdp(
"http://localhost:9222"
)
            context = browser.contexts[
0
]
            page = context.new_page()

            chat_url = get_chat_url()
            
print
(
"üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç..."
)
            page.goto(chat_url, wait_until=
"networkidle"
)

            scroll_to_top(page)

            
print
(
"üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º..."
)
            title = get_chat_title(page)
            messages = extract_chat(page)

            ts = datetime.now().strftime(
"%Y-%m-%d_%H-%M"
)
            safe_title = re.sub(
r"[\\/:*?\"<>|]"
, 
""
, title)
            md_path = os.path.join(MD_DIR, 
f"
{safe_title}
_
{ts}
.md")

            md_text = format_md(messages, title, chat_url)

            
with
 
open
(md_path, 
"w"
, encoding=
"utf-8"
) 
as
 f:
                f.write(md_text)

    
except
 Exception 
as
 e:
        
print
(
f"‚ùå –û—à–∏–±–∫–∞: 
{e}
")
        exit_code = 
1


    
finally
:
        
print
(
"üõë –ó–∞–∫—Ä—ã–≤–∞–µ–º Chrome..."
)
        
if
 chrome_process.poll() 
is
 
None
:
            chrome_process.terminate()
            
try
:
                chrome_process.wait(timeout=
5
)
            
except
 subprocess.TimeoutExpired:
                chrome_process.kill()

    sys.exit(exit_code)
```

–≠—Ç–æ—Ç–≤–æ–π –ø–æ–¥—Ö–æ–¥, —Å–ª–µ–≥–∫–∞ –≤—ã—á–∏—â–µ–Ω–Ω—ã–π, –Ω–æ –ª–æ–≥–∏–∫–∞ —Ç–∞ –∂–µ.

```
python
Copy code
def
 
extract_chat
(
page
):
    soup = BeautifulSoup(page.content(), 
"html.parser"
)

    messages = []
    last_role = 
None

    buffer = []

    
for
 article 
in
 soup.select(
"article"
):
        role = 
"assistant"

        
if
 article.find(
"h5"
) 
and
 
"You"
 
in
 article.get_text():
            role = 
"user"


        blocks = []

        
for
 el 
in
 article.find_all([
"p"
, 
"pre"
, 
"img"
, 
"ul"
, 
"ol"
], recursive=
True
):

            
if
 el.name == 
"img"
 
and
 el.get(
"src"
):
                blocks.append(
f"![](
{download_image(el[
'src'
])})")

            
elif
 el.name == 
"pre"
:
                code = el.get_text(
"\n"
, strip=
False
)
                lang = 
""

                
for
 c 
in
 el.get(
"class"
, []):
                    
if
 c.startswith(
"language-"
):
                        lang = c.replace(
"language-"
, 
""
)
                blocks.append(
f"```
{lang}
\n
{code.rstrip()}
\n```")

            
elif
 el.name 
in
 (
"ul"
, 
"ol"
):
                
for
 li 
in
 el.find_all(
"li"
):
                    blocks.append(
f"- 
{li.get_text(strip=
True
)}")

            
elif
 el.name == 
"p"
:
                text = el.get_text(strip=
True
)
                
if
 text:
                    blocks.append(text)

        
if
 
not
 blocks:
            
continue


        text = 
"\n\n"
.join(blocks)

        
if
 role == last_role:
            buffer.append(text)
        
else
:
            
if
 buffer:
                messages.append((last_role, 
"\n\n"
.join(buffer)))
            buffer = [text]
            last_role = role

    
if
 buffer:
        messages.append((last_role, 
"\n\n"
.join(buffer)))

    
return
 messages
```

‚úîÔ∏è –≠–∫—Å–ø–æ—Ä—Ç—Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç‚úîÔ∏è –ü–æ–≤–µ–¥–µ–Ω–∏–µ = –∫–∞–∫ —Ä–∞–Ω—å—à–µ‚úîÔ∏è –õ–æ–≥–∏ =—Å—Ç—Ä–æ–≥–æ –ø–æ –¢–ó‚úîÔ∏è –û—à–∏–±–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å‚úîÔ∏è –ù–∏–∫–∞–∫–æ–π —Å–∞–º–æ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤, —á—Ç–æ —ç—Ç–æprod, –∏ —Ç—É—Ç –Ω–µ–ª—å–∑—è ¬´—É–ª—É—á—à–∞—Ç—å¬ª –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ DOM.–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å—Ä–∞–∑—É –æ—Å—Ç–∞–Ω–æ–≤–∏–ª ‚Äî –¥–∞–ª—å—à–µ –±—É–¥–µ–º –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º:

- –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—É–ª—É—á—à–∏–º —Ñ–æ—Ä–º–∞—Ç md, –Ω–µ —Ç—Ä–æ–≥–∞—è –ø–∞—Ä—Å–µ—Ä

- –∏–ª–∏ —Å–¥–µ–ª–∞–µ–º–ø–∞–ø–∫—É –ø–æ–¥ —á–∞—Ç + assets, –Ω–æ —Ç–æ–∂–µ –±–µ–∑ —Ä–∏—Å–∫–∞

–∞–∫–∫—É—Ä–∞—Ç–Ω–æ—É–ª—É—á—à–∏–º —Ñ–æ—Ä–º–∞—Ç md, –Ω–µ —Ç—Ä–æ–≥–∞—è –ø–∞—Ä—Å–µ—Ä

–∏–ª–∏ —Å–¥–µ–ª–∞–µ–º–ø–∞–ø–∫—É –ø–æ–¥ —á–∞—Ç + assets, –Ω–æ —Ç–æ–∂–µ –±–µ–∑ —Ä–∏—Å–∫–∞

–¢—ã —Ä–µ—à–∞–µ—à—å.

–û–∫, –¥–µ–ª–∞–µ–º–∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Markdown + –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫,–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–≤–æ–µ–π —Ä–∞–±–æ—á–µ–π –ª–æ–≥–∏–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞.–ù–∏–∫–∞–∫–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö ¬´—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤¬ª ‚Äî —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ prod-–∏–∑–º–µ–Ω–µ–Ω–∏—è.

–Ø –¥–∞–º —Ç–µ–±–µ:

1Ô∏è‚É£ –Ω–æ–≤—É—éformat_md()‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ –∫ ChatGPT2Ô∏è‚É£ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ChatGPT\ChatGPT_0x\Cach3Ô∏è‚É£ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª—ã4Ô∏è‚É£ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è main()

```
markdown
Copy code
ChatGPT/
‚îú‚îÄ Chat Title
_2026-02-09_
12-00.md
‚îî‚îÄ Chat Title
_2026-02-09_
12-00/
   ‚îî‚îÄ Cach/

      ‚îú‚îÄ img1.png
      ‚îî‚îÄ img2.png
```

```
Copy code
ChatGPT/
‚îî‚îÄ Chat Title_2026-02-09_12-00.md
```

üëâ –ü–∞–ø–∫–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è.

–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

- –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã

- –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏

- –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

- –∫–æ–¥-–±–ª–æ–∫–∏ —á–∏—Å—Ç—ã–µ

- —Å–ø–∏—Å–∫–∏ –Ω–µ —Å–ª–∏–ø–∞—é—Ç—Å—è

- –ø–µ—Ä–µ–Ω–æ—Å—ã –Ω–µ –ª–æ–º–∞—é—Ç—Å—è

- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏

–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã

–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏

–∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–∫–æ–¥-–±–ª–æ–∫–∏ —á–∏—Å—Ç—ã–µ

—Å–ø–∏—Å–∫–∏ –Ω–µ —Å–ª–∏–ø–∞—é—Ç—Å—è

–ø–µ—Ä–µ–Ω–æ—Å—ã –Ω–µ –ª–æ–º–∞—é—Ç—Å—è

–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏

```
python
Copy code
CURRENT_EXPORT_DIR = 
None

CURRENT_CACHE_DIR = 
None

DOWNLOADED_FILES = []
```

```
python
Copy code
def
 
download_image
(
src
):
    
global
 CURRENT_CACHE_DIR, DOWNLOADED_FILES

    
if
 CURRENT_CACHE_DIR 
is
 
None
:
        
return
 src

    ext = os.path.splitext(urlparse(src).path)[
1
] 
or
 
".png"

    name = hashlib.md5(src.encode()).hexdigest()[:
12
] + ext

    path = os.path.join(CURRENT_CACHE_DIR, name)

    
if
 
not
 os.path.exists(path):
        r = requests.get(src, timeout=
20
)
        r.raise_for_status()
        
with
 
open
(path, 
"wb"
) 
as
 f:
            f.write(r.content)

    DOWNLOADED_FILES.append(name)

    
return
 
f"
{os.path.basename(CURRENT_EXPORT_DIR)}
/Cach/
{name}
"
```

```
python
Copy code
def
 
format_md
(
messages, title, source_url
):
    now = datetime.now().strftime(
"%Y-%m-%d %H:%M"
)

    out = [
        
"---"
,
        
"tags: [chatgpt, export]"
,
        
f"source: 
{source_url}
",
        
f"date: 
{now}
",
        
"---"
,
        
""
,
        
f"# 
{title}
",
        
""

    ]

    
for
 role, text 
in
 messages:

        
if
 role == 
"user"
:
            out.append(
"> üßë **You**"
)
        
else
:
            out.append(
"> ü§ñ **ChatGPT**"
)

        out.append(
">"
)
        
for
 line 
in
 text.split(
"\n"
):
            
if
 line.strip() == 
""
:
                out.append(
">"
)
            
else
:
                out.append(
f"> 
{line}
")

        out.append(
""
)
        out.append(
"---"
)
        out.append(
""
)

    
return
 
"\n"
.join(out).rstrip(
"-\n"
)
```

üëâ –≠—Ç–æ –¥–∞—ë—Ç –≤–∏–∑—É–∞–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–∏–π –Ω–∞ —á–∞—Ç.

–ù–∞–π–¥–∏ –º–µ—Å—Ç–æ –ø–æ—Å–ª–µ:

```
python
Copy code
title = get_chat_title(page)
messages = extract_chat(page)
```

–∏ –≤—Å—Ç–∞–≤—å:

```
python
Copy code
global
 CURRENT_EXPORT_DIR, CURRENT_CACHE_DIR, DOWNLOADED_FILES

DOWNLOADED_FILES = []

ts = datetime.now().strftime(
"%Y-%m-%d_%H-%M"
)
safe_title = re.sub(
r"[\\/:*?\"<>|]"
, 
""
, title)

md_filename = 
f"
{safe_title}
_
{ts}
.md"
md_path = os.path.join(MD_DIR, md_filename)

CURRENT_EXPORT_DIR = os.path.join(MD_DIR, 
f"
{safe_title}
_
{ts}
")
CURRENT_CACHE_DIR = os.path.join(CURRENT_EXPORT_DIR, 
"Cach"
)


# —Å–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

os.makedirs(CURRENT_CACHE_DIR, exist_ok=
True
)
```

–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–∞:

```
python
Copy code
# –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç ‚Äî —É–¥–∞–ª—è–µ–º –ø–∞–ø–∫—É


if
 
not
 DOWNLOADED_FILES:
    
if
 os.path.exists(CURRENT_EXPORT_DIR):
        
import
 shutil
        shutil.rmtree(CURRENT_EXPORT_DIR)
```

‚úîÔ∏è —Ñ–æ—Ä–º–∞—Ç –∫–∞–∫ —É ChatGPT‚úîÔ∏è —á–∏—Å—Ç—ã–π Markdown –¥–ª—è Obsidian‚úîÔ∏è –∫–æ–¥-–±–ª–æ–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã‚úîÔ∏è —Å–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã‚úîÔ∏è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ‚úîÔ∏è –ø–∞–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã‚úîÔ∏è –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–∞—Ä—Å–µ—Ä–∞‚úîÔ∏è –Ω–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤‚úîÔ∏è prod-safe –∏–∑–º–µ–Ω–µ–Ω–∏—è

DOM ChatGPT –º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–∑ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤.–¢–≤–æ–π —Ç–µ–∫—É—â–∏–π –ø–∞—Ä—Å–µ—Ä ‚Äî–æ—á–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–º–µ–∂–¥—É —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é.–ù–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –µ–≥–æ –Ω–∞recursive=False‚Äî —ç—Ç–æ –ª–æ–º–∞–µ—Ç 90% —á–∞—Ç–æ–≤.

–Ø –º–æ–≥—É —Ç–µ–±–µ —Å–¥–µ–ª–∞—Ç—å:

- ‚≠ê —ç–∫—Å–ø–æ—Ä—Ç100% pixel-perfect ChatGPT markdown

- ‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü ChatGPT

- ‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É LaTeX

- ‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É Mermaid

- ‚≠ê multi-image gallery –∫–∞–∫ –≤ Obsidian

- ‚≠ê –∞–≤—Ç–æ-—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π

- ‚≠ê ultra-stable DOM extractor (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ enterprise scraping)

‚≠ê —ç–∫—Å–ø–æ—Ä—Ç100% pixel-perfect ChatGPT markdown

‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü ChatGPT

‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É LaTeX

‚≠ê –ø–æ–¥–¥–µ—Ä–∂–∫—É Mermaid

‚≠ê multi-image gallery –∫–∞–∫ –≤ Obsidian

‚≠ê –∞–≤—Ç–æ-—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π

‚≠ê ultra-stable DOM extractor (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ enterprise scraping)

–°–∫–∞–∂–∏ ‚Äî –∏ —Å–¥–µ–ª–∞–µ–º –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –±–µ–∑ —Ä–∏—Å–∫–∞ –¥–ª—è prod üëç.

–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ ‚Äî —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—á—ë—Ç–∫–∞—è –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–∞—è.–î–µ–ª–∞–µ–º —Ä–æ–≤–Ω–æ —Ç–∞–∫,–±–µ–∑ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–π –ª–æ–≥–∏–∫–∏.

–Ø —Å–µ–π—á–∞—Å:

- –∑–∞—Ñ–∏–∫—Å–∏—Ä—É—é—Ç–æ—á–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é –º–æ–¥–µ–ª—å

- –¥–∞–º–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ª–æ–≥–∏–∫—É –ø—É—Ç–µ–π

- –ø–æ–∫–∞–∂—É–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥—É(–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, prod-safe)

- –ø–æ—è—Å–Ω—é, –≥–¥–µ –∏ –ø–æ—á–µ–º—É —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è

–∑–∞—Ñ–∏–∫—Å–∏—Ä—É—é—Ç–æ—á–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é –º–æ–¥–µ–ª—å

–¥–∞–º–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ª–æ–≥–∏–∫—É –ø—É—Ç–µ–π

–ø–æ–∫–∞–∂—É–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥—É(–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, prod-safe)

–ø–æ—è—Å–Ω—é, –≥–¥–µ –∏ –ø–æ—á–µ–º—É —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è

```
Copy code
ChatGPT/
‚îú‚îÄ Chat Title_2026-02-09_12-00.md
‚îÇ
‚îî‚îÄ ChatGPT_0x/
   ‚îî‚îÄ Cach/
      ‚îî‚îÄ Chat Title_2026-02-09_12-00/
         ‚îú‚îÄ img1.png
         ‚îî‚îÄ img2.png
```

- .md‚Äî–≤ –∫–æ—Ä–Ω–µChatGPT/

- –≤—Å–µ –∞—Å—Å–µ—Ç—ã ‚Äî–¢–û–õ–¨–ö–û–≤ChatGPT/ChatGPT_0x/Cach/<–∏–º—è_—á–∞—Ç–∞>/

- –µ—Å–ª–∏–Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π / —Ñ–∞–π–ª–æ–≤‚Üí‚ùåChatGPT_0x/–ù–ï –°–û–ó–î–ê–Å–¢–°–Ø

- —Å—Å—ã–ª–∫–∏ –≤ Markdown–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –≤–∞–ª–∏–¥–Ω—ã–µ –¥–ª—è Obsidian

.md‚Äî–≤ –∫–æ—Ä–Ω–µChatGPT/

–≤—Å–µ –∞—Å—Å–µ—Ç—ã ‚Äî–¢–û–õ–¨–ö–û–≤ChatGPT/ChatGPT_0x/Cach/<–∏–º—è_—á–∞—Ç–∞>/

–µ—Å–ª–∏–Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π / —Ñ–∞–π–ª–æ–≤‚Üí‚ùåChatGPT_0x/–ù–ï –°–û–ó–î–ê–Å–¢–°–Ø

—Å—Å—ã–ª–∫–∏ –≤ Markdown–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –≤–∞–ª–∏–¥–Ω—ã–µ –¥–ª—è Obsidian

```
python
Copy code
CURRENT_CHAT_SLUG = 
None

CURRENT_CACHE_DIR = 
None

DOWNLOADED_FILES = []
```

–í–≤–µ—Ä—Ö—É, —Ä—è–¥–æ–º —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

```
python
Copy code
EXPORT_ROOT = MD_DIR                  
# ChatGPT/

ASSETS_ROOT = os.path.join(MD_DIR, 
"ChatGPT_0x"
, 
"Cach"
)
```

‚ö†Ô∏è–ù–ï —Å–æ–∑–¥–∞—ë–º –∏—Ö –∑–∞—Ä–∞–Ω–µ–µ

```
python
Copy code
def
 
download_image
(
src
):
    
global
 CURRENT_CACHE_DIR, DOWNLOADED_FILES

    
if
 CURRENT_CACHE_DIR 
is
 
None
:
        
return
 src

    ext = os.path.splitext(urlparse(src).path)[
1
] 
or
 
".png"

    name = hashlib.md5(src.encode()).hexdigest()[:
12
] + ext
    path = os.path.join(CURRENT_CACHE_DIR, name)

    
if
 
not
 os.path.exists(path):
        r = requests.get(src, timeout=
20
)
        r.raise_for_status()
        
with
 
open
(path, 
"wb"
) 
as
 f:
            f.write(r.content)

    DOWNLOADED_FILES.append(name)

    
# –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç md-—Ñ–∞–π–ª–∞

    
return
 
f"ChatGPT_0x/Cach/
{CURRENT_CHAT_SLUG}
/
{name}
"
```

```
python
Copy code
global
 CURRENT_CHAT_SLUG, CURRENT_CACHE_DIR, DOWNLOADED_FILES

DOWNLOADED_FILES = []

ts = datetime.now().strftime(
"%Y-%m-%d_%H-%M"
)
safe_title = re.sub(
r"[\\/:*?\"<>|]"
, 
""
, title)
CURRENT_CHAT_SLUG = 
f"
{safe_title}
_
{ts}
"

md_path = os.path.join(EXPORT_ROOT, 
f"
{CURRENT_CHAT_SLUG}
.md")

CURRENT_CACHE_DIR = os.path.join(
    ASSETS_ROOT,
    CURRENT_CHAT_SLUG
)


# —Å–æ–∑–¥–∞—ë–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

os.makedirs(CURRENT_CACHE_DIR, exist_ok=
True
)
```

```
python
Copy code
# –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ—Ç ‚Äî —á–∏—Å—Ç–∏–º –∑–∞ —Å–æ–±–æ–π


if
 
not
 DOWNLOADED_FILES:
    
import
 shutil
    
if
 os.path.exists(os.path.join(MD_DIR, 
"ChatGPT_0x"
)):
        shutil.rmtree(os.path.join(MD_DIR, 
"ChatGPT_0x"
))
```

‚úîÔ∏è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

- –Ω–∏ –æ–¥–Ω–æ–π –ª–∏—à–Ω–µ–π –ø–∞–ø–∫–∏

- —á–∏—Å—Ç—ã–π –∫–æ—Ä–µ–Ω—å

- –Ω–æ–ª—å –º—É—Å–æ—Ä–∞

–Ω–∏ –æ–¥–Ω–æ–π –ª–∏—à–Ω–µ–π –ø–∞–ø–∫–∏

—á–∏—Å—Ç—ã–π –∫–æ—Ä–µ–Ω—å

–Ω–æ–ª—å –º—É—Å–æ—Ä–∞

–§–æ—Ä–º–∞—Ç–Ω–µ —Ç—Ä–æ–≥–∞–µ–º –ø–∞—Ä—Å–µ—Ä, —Ç–æ–ª—å–∫–æ –æ–±—ë—Ä—Ç–∫—É:

```
python
Copy code
def
 
format_md
(
messages, title, source_url
):
    now = datetime.now().strftime(
"%Y-%m-%d %H:%M"
)

    out = [
        
"---"
,
        
"tags: [chatgpt, export]"
,
        
f"source: 
{source_url}
",
        
f"date: 
{now}
",
        
"---"
,
        
""
,
        
f"# 
{title}
",
        
""

    ]

    
for
 role, text 
in
 messages:
        
if
 role == 
"user"
:
            out.append(
"## üßë You"
)
        
else
:
            out.append(
"## ü§ñ ChatGPT"
)

        out.append(
""
)
        out.append(text.strip())
        out.append(
""
)

    
return
 
"\n"
.join(out).strip()
```

‚úîÔ∏è —á–∏—Ç–∞–µ–º–æ‚úîÔ∏è Obsidian-native‚úîÔ∏è –∫–æ–¥ –∏ —Å–ø–∏—Å–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç—Å—è‚úîÔ∏è –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞

- ‚ùå –Ω–µ —Ç—Ä–æ–≥–∞–µ–º DOM-–ª–æ–≥–∏–∫—É

- ‚ùå –Ω–µ –º–µ–Ω—è–µ–º scroll

- ‚ùå –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥–æ–≤

- ‚úÖ —Ç–æ–ª—å–∫–æ –ø—É—Ç–∏ + md-–æ–±—ë—Ä—Ç–∫–∞

- ‚úÖ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- ‚úÖ –ª–µ–≥–∫–æ –±—ç–∫–∞–ø–∏—Ç—å / —Å–∏–Ω–∫–∞—Ç—å / git‚Äô–∏—Ç—å

‚ùå –Ω–µ —Ç—Ä–æ–≥–∞–µ–º DOM-–ª–æ–≥–∏–∫—É

‚ùå –Ω–µ –º–µ–Ω—è–µ–º scroll

‚ùå –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥–æ–≤

‚úÖ —Ç–æ–ª—å–∫–æ –ø—É—Ç–∏ + md-–æ–±—ë—Ä—Ç–∫–∞

‚úÖ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

‚úÖ –ª–µ–≥–∫–æ –±—ç–∫–∞–ø–∏—Ç—å / —Å–∏–Ω–∫–∞—Ç—å / git‚Äô–∏—Ç—å

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å,—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–æ–æ–±—â–µ –±–µ–∑ —Ä–∏—Å–∫–∞:

- –∞–≤—Ç–æ-–ª–∏–Ω–∫–æ–≤–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–Ω—Ü–µ —á–∞—Ç–∞

- fold-–±–ª–æ–∫–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç ChatGPT

- –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü –∏ —Ñ–æ—Ä–º—É–ª

- –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π dry-run —Ä–µ–∂–∏–º –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

–∞–≤—Ç–æ-–ª–∏–Ω–∫–æ–≤–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–Ω—Ü–µ —á–∞—Ç–∞

fold-–±–ª–æ–∫–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç ChatGPT

–ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü –∏ —Ñ–æ—Ä–º—É–ª

–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π dry-run —Ä–µ–∂–∏–º –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

–°–∫–∞–∂–∏, –∫—É–¥–∞ –∏–¥—ë–º –¥–∞–ª—å—à–µ ‚Äî —Ç–µ–ø–µ—Ä—å –º—ã –Ω–∞ —Ä–µ–ª—å—Å–∞—Ö üëç

–ü—Ä–∏–Ω—è–ª. –ù–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π, –Ω–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ ‚Äî—Ü–µ–ª—å–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π, prod-safe —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å.

–Ø—Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—é –≤—Å—ë, —á—Ç–æ —Ç—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª:

- ‚úÖ –ª–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞–Ω–µ —Å–ª–æ–º–∞–Ω–∞

- ‚úÖ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞

- ‚úÖ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π Markdown (Obsidian / ChatGPT-like)

- ‚úÖ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–†–û–í–ù–û—Ç–∞–∫–∞—è:

‚úÖ –ª–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞–Ω–µ —Å–ª–æ–º–∞–Ω–∞

‚úÖ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞

‚úÖ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π Markdown (Obsidian / ChatGPT-like)

‚úÖ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–†–û–í–ù–û—Ç–∞–∫–∞—è:

```
Copy code
ChatGPT/
‚îú‚îÄ Chat Title_2026-02-09_12-00.md
‚îÇ
‚îî‚îÄ ChatGPT_0x/
   ‚îî‚îÄ Cach/
      ‚îî‚îÄ Chat Title_2026-02-09_12-00/
         ‚îú‚îÄ img1.png
         ‚îî‚îÄ img2.png
```

- ‚ùå –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç ‚ÄîChatGPT_0x–ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è

- ‚ùå –Ω–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤

- ‚ùå –Ω–∏–∫–∞–∫–∏—Ö DOM-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

‚ùå –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç ‚ÄîChatGPT_0x–ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è

‚ùå –Ω–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤

‚ùå –Ω–∏–∫–∞–∫–∏—Ö DOM-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π —Ü–µ–ª–∏–∫–æ–º –∏ –∏—Å–ø–æ–ª—å–∑—É–π.

```
python
Copy code
import
 subprocess

import
 time

import
 os

import
 sys

import
 hashlib

import
 requests

import
 re

from
 urllib.parse 
import
 urlparse

from
 datetime 
import
 datetime

from
 bs4 
import
 BeautifulSoup

from
 playwright.sync_api 
import
 sync_playwright

import
 pyperclip

import
 shutil



# ================= –ù–ê–°–¢–†–û–ô–ö–ò =================

CHROME_PATH = 
r"C:\Program Files\Google\Chrome\Application\chrome.exe"

CHROME_PROFILE = 
r"C:\chrome-debug"

WAIT_CHROME = 
3


ROOT_DIR = os.path.abspath(os.path.dirname(__file__))  
# ChatGPT/

MD_DIR = ROOT_DIR

ASSETS_ROOT = os.path.join(MD_DIR, 
"ChatGPT_0x"
, 
"Cach"
)


# runtime

CURRENT_CHAT_SLUG = 
None

CURRENT_CACHE_DIR = 
None

DOWNLOADED_FILES = []

# ============================================




def
 
get_chat_url
():
    url = pyperclip.paste().strip()
    
if
 
not
 url.startswith(
"https://chatgpt.com/"
):
        
raise
 RuntimeError(
"‚ùå –í –±—É—Ñ–µ—Ä–µ –Ω–µ—Ç —Å—Å—ã–ª–∫–∏ ChatGPT"
)
    
return
 url



def
 
get_chat_title
(
page
):
    title = page.title().replace(
" - ChatGPT"
, 
""
).strip()
    
return
 title 
or
 
"ChatGPT Chat"




def
 
scroll_to_top
(
page
):
    last = 
None

    
while
 
True
:
        h = page.evaluate(
"document.body.scrollHeight"
)
        
if
 h == last:
            
break

        last = h
        page.evaluate(
"window.scrollTo(0,0)"
)
        time.sleep(
1
)



def
 
download_image
(
src
):
    
global
 CURRENT_CACHE_DIR, DOWNLOADED_FILES, CURRENT_CHAT_SLUG

    
if
 CURRENT_CACHE_DIR 
is
 
None
:
        
return
 src

    ext = os.path.splitext(urlparse(src).path)[
1
] 
or
 
".png"

    name = hashlib.md5(src.encode()).hexdigest()[:
12
] + ext
    path = os.path.join(CURRENT_CACHE_DIR, name)

    
if
 
not
 os.path.exists(path):
        r = requests.get(src, timeout=
20
)
        r.raise_for_status()
        
with
 
open
(path, 
"wb"
) 
as
 f:
            f.write(r.content)

    DOWNLOADED_FILES.append(name)

    
return
 
f"ChatGPT_0x/Cach/
{CURRENT_CHAT_SLUG}
/
{name}
"



def
 
extract_chat
(
page
):
    soup = BeautifulSoup(page.content(), 
"html.parser"
)

    messages = []
    last_role = 
None

    buffer = []

    
for
 article 
in
 soup.select(
"article"
):
        role = 
"assistant"

        
if
 article.find(
"h5"
) 
and
 
"You"
 
in
 article.get_text():
            role = 
"user"


        blocks = []

        
for
 el 
in
 article.find_all([
"p"
, 
"pre"
, 
"img"
, 
"ul"
, 
"ol"
], recursive=
True
):

            
if
 el.name == 
"img"
 
and
 el.get(
"src"
):
                blocks.append(
f"![](
{download_image(el[
'src'
])})")

            
elif
 el.name == 
"pre"
:
                code = el.get_text(
"\n"
, strip=
False
)
                lang = 
""

                
for
 c 
in
 el.get(
"class"
, []):
                    
if
 c.startswith(
"language-"
):
                        lang = c.replace(
"language-"
, 
""
)
                blocks.append(
f"```
{lang}
\n
{code.rstrip()}
\n```")

            
elif
 el.name 
in
 (
"ul"
, 
"ol"
):
                
for
 li 
in
 el.find_all(
"li"
):
                    blocks.append(
f"- 
{li.get_text(strip=
True
)}")

            
elif
 el.name == 
"p"
:
                text = el.get_text(strip=
True
)
                
if
 text:
                    blocks.append(text)

        
if
 
not
 blocks:
            
continue


        text = 
"\n\n"
.join(blocks)

        
if
 role == last_role:
            buffer.append(text)
        
else
:
            
if
 buffer:
                messages.append((last_role, 
"\n\n"
.join(buffer)))
            buffer = [text]
            last_role = role

    
if
 buffer:
        messages.append((last_role, 
"\n\n"
.join(buffer)))

    
return
 messages



def
 
format_md
(
messages, title, source_url
):
    now = datetime.now().strftime(
"%Y-%m-%d %H:%M"
)

    out = [
        
"---"
,
        
"tags: [chatgpt, export]"
,
        
f"source: 
{source_url}
",
        
f"date: 
{now}
",
        
"---"
,
        
""
,
        
f"# 
{title}
",
        
""

    ]

    
for
 role, text 
in
 messages:
        
if
 role == 
"user"
:
            out.append(
"## üßë You"
)
        
else
:
            out.append(
"## ü§ñ ChatGPT"
)

        out.append(
""
)
        out.append(text.strip())
        out.append(
""
)

    
return
 
"\n"
.join(out).strip()



def
 
main
():
    
print
(
"üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Chrome —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π..."
)
    chrome_process = subprocess.Popen([
        CHROME_PATH,
        
"--remote-debugging-port=9222"
,
        
"--remote-debugging-address=127.0.0.1"
,
        
f"--user-data-dir=
{CHROME_PROFILE}
"
    ])

    
print
(
f"‚è≥ –ñ–¥–µ–º 
{WAIT_CHROME}
 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—É—Å–∫ Chrome...")
    time.sleep(WAIT_CHROME)

    exit_code = 
0


    
try
:
        
with
 sync_playwright() 
as
 p:
            browser = p.chromium.connect_over_cdp(
"http://localhost:9222"
)
            context = browser.contexts[
0
]
            page = context.new_page()

            chat_url = get_chat_url()
            
print
(
"üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç..."
)
            page.goto(chat_url, wait_until=
"networkidle"
)

            scroll_to_top(page)

            
print
(
"üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º..."
)
            title = get_chat_title(page)
            messages = extract_chat(page)

            
global
 CURRENT_CHAT_SLUG, CURRENT_CACHE_DIR, DOWNLOADED_FILES
            DOWNLOADED_FILES = []

            ts = datetime.now().strftime(
"%Y-%m-%d_%H-%M"
)
            safe_title = re.sub(
r"[\\/:*?\"<>|]"
, 
""
, title)
            CURRENT_CHAT_SLUG = 
f"
{safe_title}
_
{ts}
"

            md_path = os.path.join(MD_DIR, 
f"
{CURRENT_CHAT_SLUG}
.md")

            CURRENT_CACHE_DIR = os.path.join(ASSETS_ROOT, CURRENT_CHAT_SLUG)
            os.makedirs(CURRENT_CACHE_DIR, exist_ok=
True
)

            md_text = format_md(messages, title, chat_url)

            
with
 
open
(md_path, 
"w"
, encoding=
"utf-8"
) 
as
 f:
                f.write(md_text)

            
# –µ—Å–ª–∏ –∞—Å—Å–µ—Ç–æ–≤ –Ω–µ—Ç ‚Äî —á–∏—Å—Ç–∏–º

            
if
 
not
 DOWNLOADED_FILES:
                
if
 os.path.exists(os.path.join(MD_DIR, 
"ChatGPT_0x"
)):
                    shutil.rmtree(os.path.join(MD_DIR, 
"ChatGPT_0x"
))

    
except
 Exception 
as
 e:
        
print
(
f"‚ùå –û—à–∏–±–∫–∞: 
{e}
")
        exit_code = 
1


    
finally
:
        
print
(
"üõë –ó–∞–∫—Ä—ã–≤–∞–µ–º Chrome..."
)
        
if
 chrome_process.poll() 
is
 
None
:
            chrome_process.terminate()
            
try
:
                chrome_process.wait(timeout=
5
)
            
except
 subprocess.TimeoutExpired:
                chrome_process.kill()

    sys.exit(exit_code)



if
 __name__ == 
"__main__"
:
    main()
```

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –±–∞–∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞,—Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É:

- —É–ª—É—á—à–∏—Ç—å Markdown–±–µ–∑ —Ç—Ä–æ–≥–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞

- –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü / LaTeX

- –∞–≤—Ç–æ-fold —Å–µ–∫—Ü–∏–∏ –≤ Obsidian

- one-click exporter –≤—Å–µ—Ö —á–∞—Ç–æ–≤

- dry-run —Ä–µ–∂–∏–º (–±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)

—É–ª—É—á—à–∏—Ç—å Markdown–±–µ–∑ —Ç—Ä–æ–≥–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞

–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∞–±–ª–∏—Ü / LaTeX

–∞–≤—Ç–æ-fold —Å–µ–∫—Ü–∏–∏ –≤ Obsidian

one-click exporter –≤—Å–µ—Ö —á–∞—Ç–æ–≤

dry-run —Ä–µ–∂–∏–º (–±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)

–ù–æ —ç—Ç–æ ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—ã —Å–∫–∞–∂–µ—à—å.–°–µ–π—á–∞—Å —É —Ç–µ–±—è—Ä–∞–±–æ—á–∏–π, —á–∏—Å—Ç—ã–π, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.